# 10、在企业中部署ActiveMQ

**高可用性**：运行多个ActiveMQ代理在不同的物理机上，所以如果一个失败，一个次要的就可以接管。      主/从：一个代理扮演主角色，更多的等待主节点失败。

主服务器的故障是由从服务器到主服务器的连接丢失而检测到的。

**无共享主/从：**每一个代理有它自己唯一的消息存储。所有的消息从主服务器复制从服务器。一个主节点允许只有一个从节点，并且从节点自己不能有其他从节点。当出现故障时的停机时间是可接受的。管理员手动干预对于为新主服务器配置新从服务器是必要的。

客户端将使用故障转移传输：

failover://\(tcp://masterhost:61616,tcp://slavehost:61616\)?randomize=false

**主/从共享存储**：多个代理可以连接到共享消息存储（DB或者共享文件系统），同时只有一个代理处于活动状态。不需要人工干预来维护应用程序的完整性。不限制从代理的数量。~~主服务器将抓取DB上的锁的从服务器~~

**存储和转发：**消息总是被存储在本地的代理，通过网络转发到其他的代理。

**垂直扩展：**用于增加单个代理我可以处理增加的连接数量的技术。默认情况下，ActiveMQ使用阻塞I/O连接（一个连接一个线程）。非阻塞I/O减少线程数量。

**水平扩展：**增加应用程序可用的ActiveMQ代理程序的数量的技术，引入一些延迟，因为消息在交付给使用者之前可能必须通过多个代理

客户端流量分区是垂直分区和水平分区的混合体。

